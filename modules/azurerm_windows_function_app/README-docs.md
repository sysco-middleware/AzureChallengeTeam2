## Requirements

No requirements.

## Providers

| Name | Version |
|------|---------|
| <a name="provider_azurerm"></a> [azurerm](#provider\_azurerm) | n/a |
| <a name="provider_null"></a> [null](#provider\_null) | n/a |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [azurerm_windows_function_app.wfa](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/windows_function_app) | resource |
| [null_resource.netfx](https://registry.terraform.io/providers/hashicorp/null/latest/docs/resources/resource) | resource |
| [azurerm_resource_group.rg](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/resource_group) | data source |
| [azurerm_service_plan.sp](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/service_plan) | data source |
| [azurerm_storage_account.sa](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/storage_account) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_always_on"></a> [always\_on](#input\_always\_on) | (Optional) If this Windows Function App is Always On enabled. Defaults to true. | `bool` | `false` | no |
| <a name="input_app_insights"></a> [app\_insights](#input\_app\_insights) | Aplication insights | <pre>object({<br>    enabled             = bool<br>    instrumentation_key = string # (Optional) The Instrumentation Key for connecting the Windows Function App to Application Insights.<br>    connection_string   = string # (Optional) The Connection String for linking the Windows Function App to Application Insights.<br>  })</pre> | <pre>{<br>  "connection_string": null,<br>  "enabled": false,<br>  "instrumentation_key": null<br>}</pre> | no |
| <a name="input_app_scale_limit"></a> [app\_scale\_limit](#input\_app\_scale\_limit) | (Optional) The number of workers this function app can scale out to. Only applicable to apps on the Consumption and Premium plan. | `number` | `null` | no |
| <a name="input_app_service_logs"></a> [app\_service\_logs](#input\_app\_service\_logs) | Application service logs settings | <pre>object({<br>    disk_quota_mb         = number # (Required) The amount of disk space to use for logs. Valid values are between 25 and 100.<br>    retention_period_days = number # (Optional) The retention period for logs in days. Valid values are between 0 and 99999. Defaults to 0 (never delete).<br>  })</pre> | <pre>{<br>  "disk_quota_mb": 25,<br>  "retention_period_days": 60<br>}</pre> | no |
| <a name="input_app_settings"></a> [app\_settings](#input\_app\_settings) | Map of App Settings. This will be merged with default app settings. https://docs.microsoft.com/en-us/azure/azure-functions/functions-app-settings. | `map(any)` | `{}` | no |
| <a name="input_app_settings_default"></a> [app\_settings\_default](#input\_app\_settings\_default) | BUGFIX: Won't reset app\_settings values. This sould be enabled only when creating resource for the first. | `bool` | `false` | no |
| <a name="input_auth_settings"></a> [auth\_settings](#input\_auth\_settings) | Authentication Settings | <pre>list(object({<br>    enabled                   = bool   # (Required) Should the Authentication / Authorization feature be enabled for the Windows Function App?<br>    default_provider          = string # (Optional) The default authentication provider to use when multiple providers are configured. Possible values include: AzureActiveDirectory, Facebook, Google, MicrosoftAccount, Twitter, Github<br>    unauth_client_action      = string # (Optional) The action to take when an unauthenticated client attempts to access the app. Possible values include: RedirectToLoginPage, AllowAnonymous.<br>    token_store_enabled       = bool   # (Optional) Should the Windows Function App durably store platform-specific security tokens that are obtained during login flows? Defaults to false.<br>    allowed_ext_redirect_urls = list(string)<br>    runtime_version           = string # Optional) The Runtime Version of the Authentication / Authorization feature in use for the Windows Function App. Choose between 1 (default) and 2<br>    active_directory = object({<br>      client_id     = string       # (Required) The ID of the Client to use to authenticate with Azure Active Directory.<br>      client_secret = string       # (Optional) The Client Secret for the Client ID. Cannot be used with client_secret_setting_name<br>      audiences     = list(string) # (Optional) Specifies a list of Allowed audience values to consider when validating JWTs issued by Azure Active Directory.<br>      # client_secret_setting_name - (Optional) The App Setting name that contains the client secret of the Client. Cannot be used with client_secret.<br>    })<br>    microsoft = object({<br>      client_id     = string # (Required) The OAuth 2.0 client ID that was created for the app used for authentication.<br>      client_secret = string # (Optional) The OAuth 2.0 client secret that was created for the app used for authentication. Cannot be specified with client_secret_setting_name.<br>      # oauth_scopes - (Optional) Specifies a list of OAuth 2.0 scopes that will be requested as part of Microsoft Account authentication. If not specified, wl.basic is used as the default scope.<br>    })<br><br>  }))</pre> | `[]` | no |
| <a name="input_backup"></a> [backup](#input\_backup) | Backup for the App Service | <pre>object({<br>    name                = string # (Required) Specifies the name for this Backup<br>    enabled             = bool   # (Required) Is this Backup enabled?<br>    storage_account_url = string<br>    schedule = object({<br>      frequency_interval       = string # (Required) Sets how often the backup should be executed.<br>      frequency_unit           = string # (Optional) Sets the unit of time for how often the backup should be executed. Possible values are Day or Hour.<br>      keep_at_least_one_backup = bool   # (Optional) Should at least one backup always be kept in the Storage Account by the Retention Policy, regardless of how old it is?<br>      retention_period_days    = string # (Optional) Specifies the number of days after which Backups should be deleted.<br>      start_time               = string # (Optional) Sets when the schedule should start working.<br>    })<br>  })</pre> | <pre>{<br>  "enabled": false,<br>  "name": "backup",<br>  "schedule": {<br>    "frequency_interval": 1,<br>    "frequency_unit": "Day",<br>    "keep_at_least_one_backup": false,<br>    "retention_period_days": 1,<br>    "start_time": null<br>  },<br>  "storage_account_url": null<br>}</pre> | no |
| <a name="input_builtin_logging_enabled"></a> [builtin\_logging\_enabled](#input\_builtin\_logging\_enabled) | (Optional) Should the built-in logging of this Function App be enabled? Defaults to true | `bool` | `true` | no |
| <a name="input_client_certificate_mode"></a> [client\_certificate\_mode](#input\_client\_certificate\_mode) | (Optional) Incoming client certificate mode. Possible values include Require, Allow (Default), Optional or Ignore. | `string` | `"Allow"` | no |
| <a name="input_connection_strings"></a> [connection\_strings](#input\_connection\_strings) | A list of connectionstrings | <pre>list(object({<br>    name = string<br>    type = string<br>    conn = string<br>  }))</pre> | `[]` | no |
| <a name="input_cors"></a> [cors](#input\_cors) | Cross-Origin Resource Sharing (CORS) allows JavaScript code running in a browser on an external host to interact with your backend | <pre>object({<br>    enabled             = bool<br>    allowed_origins     = list(string) # (Required) Specifies a list of origins that should be allowed to make cross-origin calls.<br>    support_credentials = bool         # (Optional) Whether CORS requests with credentials are allowed. Defaults to false<br>  })</pre> | <pre>{<br>  "allowed_origins": [<br>    "*"<br>  ],<br>  "enabled": false,<br>  "support_credentials": true<br>}</pre> | no |
| <a name="input_daily_memory_time_quota"></a> [daily\_memory\_time\_quota](#input\_daily\_memory\_time\_quota) | (Optional) The amount of memory in gigabyte-seconds that your application is allowed to consume per day. Setting this value only affects function apps under the consumption plan. Defaults to 0. | `number` | `null` | no |
| <a name="input_dotnet6_workaround"></a> [dotnet6\_workaround](#input\_dotnet6\_workaround) | n/a | <pre>object({<br>    subscription_id = string<br>    client_id       = string<br>    client_secret   = string<br>    tenant_id       = string<br>  })</pre> | <pre>{<br>  "client_id": null,<br>  "client_secret": null,<br>  "subscription_id": null,<br>  "tenant_id": null<br>}</pre> | no |
| <a name="input_dotnet_version"></a> [dotnet\_version](#input\_dotnet\_version) | (Optional) The version of .Net to use. Possible values include 3.1 and 6. If 6 is set then dotnet6\_workaround must be applied too. | `number` | `3.1` | no |
| <a name="input_enabled"></a> [enabled](#input\_enabled) | Is the App Service Enabled? | `bool` | `true` | no |
| <a name="input_ftps_state"></a> [ftps\_state](#input\_ftps\_state) | (Optional) State of FTP / FTPS service for this App Service. Possible values include: AllAllowed, FtpsOnly and Disabled. AppService log requires this to be activated. | `string` | `"Disabled"` | no |
| <a name="input_health_check_path"></a> [health\_check\_path](#input\_health\_check\_path) | (Optional) Path which will be checked for this function app health. | `string` | `null` | no |
| <a name="input_http2_enabled"></a> [http2\_enabled](#input\_http2\_enabled) | (Optional) Specifies if the http2 protocol should be enabled. Defaults to true. | `bool` | `true` | no |
| <a name="input_https_only"></a> [https\_only](#input\_https\_only) | Can the App Service only be accessed via HTTPS? | `bool` | `false` | no |
| <a name="input_ip_restrictions"></a> [ip\_restrictions](#input\_ip\_restrictions) | The IP Address used for this IP Restriction. One of either ip\_address, service\_tag or virtual\_network\_subnet\_id must be specified. IP\_address should be CIDR or IP-address/32 | <pre>list(object({<br>    name                      = string<br>    action                    = string<br>    priority                  = number<br>    ip_address                = string # (Optional) The CIDR notation of the IP or IP Range to match. For example: 10.0.0.0/24 or 192.168.10.1/32<br>    virtual_network_subnet_id = string # (Optional) The Virtual Network Subnet ID used for this IP Restriction.<br>    service_tag               = string # (Optional) The Service Tag used for this IP Restriction<br>    headers = list(object({<br>      x_azure_fdid      = set(string)<br>      x_fd_health_probe = set(string)<br>      x_forwarded_for   = set(string)<br>      x_forwarded_host  = set(string)<br>    }))<br>  }))</pre> | `[]` | no |
| <a name="input_java_version"></a> [java\_version](#input\_java\_version) | (Optional) The version of Java to run. Possible values include 8 and 11. | `number` | `null` | no |
| <a name="input_managed_identity_ids"></a> [managed\_identity\_ids](#input\_managed\_identity\_ids) | (Optional) Specifies a list of User Assigned Managed Identity IDs to be assigned to this Windows Virtual Machine Scale Set. | `list(string)` | `[]` | no |
| <a name="input_managed_identity_type"></a> [managed\_identity\_type](#input\_managed\_identity\_type) | (Optional) The type of Managed Identity which should be assigned to the Linux Virtual Machine Scale Set. Possible values are `SystemAssigned`, `UserAssigned` and `SystemAssigned, UserAssigned` | `string` | `null` | no |
| <a name="input_managed_pipeline_mode"></a> [managed\_pipeline\_mode](#input\_managed\_pipeline\_mode) | (Optional) Managed pipeline mode. Possible values include: Integrated, Classic. | `string` | `"Integrated"` | no |
| <a name="input_minimum_tls_version"></a> [minimum\_tls\_version](#input\_minimum\_tls\_version) | (Optional) Configures the minimum version of TLS required for SSL requests. Possible values include: 1.0, 1.1, and 1.2. Defaults to 1.2. | `number` | `1.2` | no |
| <a name="input_name"></a> [name](#input\_name) | n/a | `any` | n/a | yes |
| <a name="input_node_version"></a> [node\_version](#input\_node\_version) | (Optional) The version of Node to run. Possible values include 12, 14 and 16. | `string` | `null` | no |
| <a name="input_powershell_core_version"></a> [powershell\_core\_version](#input\_powershell\_core\_version) | (Optional) The version of Powershell Core to run. Possible values are 7 and 7.2. | `number` | `null` | no |
| <a name="input_rg_name"></a> [rg\_name](#input\_rg\_name) | n/a | `any` | n/a | yes |
| <a name="input_runtime_version"></a> [runtime\_version](#input\_runtime\_version) | (Optional) The runtime version associated with the Function App. Defaults to ~3. | `string` | `"~3"` | no |
| <a name="input_sa_name"></a> [sa\_name](#input\_sa\_name) | n/a | `any` | n/a | yes |
| <a name="input_scm_ip_restrictions"></a> [scm\_ip\_restrictions](#input\_scm\_ip\_restrictions) | The IP Address used for this SCM IP Restriction. SCN is used by Kudo, DevOps and Visual Studio. One of either ip\_address, service\_tag or virtual\_network\_subnet\_id must be specified. IP\_address should be CIDR or IP-address/32 | <pre>list(object({<br>    name                      = optional(string) # (Optional) The name which should be used for this ip_restriction<br>    action                    = optional(string) # (Optional) The action to take. Possible values are Allow or Deny.<br>    priority                  = optional(number) # (Optional) The priority value of this ip_restriction.<br>    ip_address                = optional(string) # (Optional) The CIDR notation of the IP or IP Range to match. For example: 10.0.0.0/24 or 192.168.10.1/32<br>    virtual_network_subnet_id = optional(string) # (Optional) The Virtual Network Subnet ID used for this IP Restriction.<br>    service_tag               = optional(string) # (Optional) The Service Tag used for this IP Restriction<br>    headers = list(object({<br>      x_azure_fdid      = set(string)<br>      x_fd_health_probe = set(string)<br>      x_forwarded_for   = set(string)<br>      x_forwarded_host  = set(string)<br>    }))<br>  }))</pre> | `[]` | no |
| <a name="input_scm_use_main"></a> [scm\_use\_main](#input\_scm\_use\_main) | (Optional) Should the Windows Function App ip\_restriction configuration be used for the SCM also. | `bool` | `false` | no |
| <a name="input_sp_name"></a> [sp\_name](#input\_sp\_name) | n/a | `any` | n/a | yes |
| <a name="input_tags"></a> [tags](#input\_tags) | A mapping of tags to assign to the resource. | `map(any)` | `{}` | no |
| <a name="input_time_zone"></a> [time\_zone](#input\_time\_zone) | The function app time zone. https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/default-time-zones?view=windows-11 | `string` | `"W. Europe Standard Time"` | no |
| <a name="input_use_32_bit_worker"></a> [use\_32\_bit\_worker](#input\_use\_32\_bit\_worker) | (Optional) Should the Linux Web App use a 32-bit worker process. Defaults to true. | `bool` | `false` | no |
| <a name="input_use_custom_runtime"></a> [use\_custom\_runtime](#input\_use\_custom\_runtime) | (Optional) Should the Windows Function App use a custom runtime? This must be null or else terraform plan will generate 'Error: Conflicting configuration arguments'. | `bool` | `null` | no |
| <a name="input_use_dotnet_isolated_runtime"></a> [use\_dotnet\_isolated\_runtime](#input\_use\_dotnet\_isolated\_runtime) | (Optional) Should the DotNet process use an isolated runtime. Defaults to false. | `bool` | `false` | no |
| <a name="input_vnet_route_all_enabled"></a> [vnet\_route\_all\_enabled](#input\_vnet\_route\_all\_enabled) | (Optional) Should all outbound traffic to have Virtual Network Security Groups and User Defined Routes applied? Defaults to true. | `bool` | `true` | no |
| <a name="input_vnet_subnet_id"></a> [vnet\_subnet\_id](#input\_vnet\_subnet\_id) | (Optional) The subnet id which will be used by this Web App for regional virtual network integration https://docs.microsoft.com/en-us/azure/app-service/overview-vnet-integration#regional-virtual-network-integration. | `string` | `null` | no |
| <a name="input_warmed_count"></a> [warmed\_count](#input\_warmed\_count) | (Optional) The number of pre-warmed instances for this Windows Function App. Only affects apps on an Elastic Premium plan. | `number` | `1` | no |
| <a name="input_websockets_enabled"></a> [websockets\_enabled](#input\_websockets\_enabled) | (Optional) Should Web Sockets be enabled. Defaults to false. | `bool` | `false` | no |
| <a name="input_worker_count"></a> [worker\_count](#input\_worker\_count) | (Optional) The number of Workers for this Windows Function App. | `number` | `2` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_custom_domain_verification_id"></a> [custom\_domain\_verification\_id](#output\_custom\_domain\_verification\_id) | An identifier used by App Service to perform domain ownership verification via DNS TXT record. |
| <a name="output_default_hostname"></a> [default\_hostname](#output\_default\_hostname) | The default hostname associated with the Function App - such as mysite.azurewebsites.net |
| <a name="output_id"></a> [id](#output\_id) | The ID of the Function App |
| <a name="output_kind"></a> [kind](#output\_kind) | The Function App kind - such as functionapp,linux,container |
| <a name="output_outbound_ip_addresses"></a> [outbound\_ip\_addresses](#output\_outbound\_ip\_addresses) | A list of outbound IP addresses |
| <a name="output_possible_outbound_ip_addresses"></a> [possible\_outbound\_ip\_addresses](#output\_possible\_outbound\_ip\_addresses) | A list of outbound IP addresses not all of which are necessarily in use. Superset of outbound\_ip\_addresses. |
| <a name="output_principal_id"></a> [principal\_id](#output\_principal\_id) | The Principal ID for the Service Principal associated with the Managed Service Identity of this App Service. |
