## Requirements

No requirements.

## Providers

| Name | Version |
|------|---------|
| <a name="provider_azurerm"></a> [azurerm](#provider\_azurerm) | n/a |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [azurerm_windows_web_app.wwa](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/windows_web_app) | resource |
| [azurerm_resource_group.rg](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/resource_group) | data source |
| [azurerm_service_plan.sp](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/service_plan) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_always_on"></a> [always\_on](#input\_always\_on) | #(Optional) If this Windows Web App is Always On enabled. Defaults to true. | `bool` | `true` | no |
| <a name="input_app_insights"></a> [app\_insights](#input\_app\_insights) | Aplication insights settings | <pre>object({<br>    enabled             = bool<br>    instrumentation_key = string<br>    connection_string   = string<br>  })</pre> | <pre>{<br>  "connection_string": null,<br>  "enabled": false,<br>  "instrumentation_key": null<br>}</pre> | no |
| <a name="input_app_scale_limit"></a> [app\_scale\_limit](#input\_app\_scale\_limit) | (Optional) The number of workers this function app can scale out to. Only applicable to apps on the Consumption and Premium plan. | `number` | `null` | no |
| <a name="input_app_settings"></a> [app\_settings](#input\_app\_settings) | Map of App Settings. This will be merged with default app settings | `map(any)` | `{}` | no |
| <a name="input_application_logs"></a> [application\_logs](#input\_application\_logs) | Application logs for the App Service | <pre>object({<br>    enabled = bool<br>    azure_blob_storage = object({<br>      level             = string # (Required) The level at which to log. Possible values include Error, Warning, Information, Verbose and Off. NOTE: this field is not available for http_logs<br>      sas_url           = string # (Required) The URL to the storage container with a shared access signature token appended.<br>      retention_in_days = number # (Required) The number of days to retain logs for.<br>    })<br>    file_system_level = string # (Optional) Log level for filesystem based logging. Supported values are Error, Information, Verbose, Warning and Off. Defaults to Off.<br>  })</pre> | <pre>{<br>  "azure_blob_storage": {<br>    "level": "Off",<br>    "retention_in_days": 10,<br>    "sas_url": null<br>  },<br>  "enabled": false,<br>  "file_system_level": "Off"<br>}</pre> | no |
| <a name="input_auth_settings"></a> [auth\_settings](#input\_auth\_settings) | Authentication Settings | <pre>list(object({<br>    enabled          = bool<br>    default_provider = string # (Optional) The default authentication provider to use when multiple providers are configured. Possible values include: AzureActiveDirectory, Facebook, Google, MicrosoftAccount, Twitter, Github<br>    active_directory = object({<br>      client_id     = string<br>      client_secret = string<br>      audiences     = list(string)<br>    })<br>  }))</pre> | `[]` | no |
| <a name="input_auto_heal_enabled"></a> [auto\_heal\_enabled](#input\_auto\_heal\_enabled) | (Optional) Should Auto heal rules be enabled. Required with auto\_heal\_setting. | `bool` | `null` | no |
| <a name="input_auto_heal_setting"></a> [auto\_heal\_setting](#input\_auto\_heal\_setting) | (Optional) Should Auto heal rules be enabled. Required with auto\_heal\_setting. | <pre>object({<br>    action = object({<br>      action_type = string # (Required) Predefined action to be taken to an Auto Heal trigger. Possible values include: Recycle, LogEvent, and CustomAction<br>      custom_action = object({<br>        executable = string # (Required) The executable to run for the custom_action.<br>        parameters = string # (Optional) The parameters to pass to the specified executable.<br>      })<br>      minimum_process_execution_time = string # (Optional) The minimum amount of time in hh:mm:ss the Windows Web App must have been running before the defined action will be run in the event of a trigger.<br>    })<br>    trigger = object({<br>      private_memory_kb = number<br>      requests = object({<br>        count    = string # (Required) The number of requests in the specified interval to trigger this rule.<br>        interval = string # (Required) The interval in hh:mm:ss.<br>      })<br>      slow_request = object({<br>        count      = string # (Required) The number of Slow Requests in the time interval to trigger this rule.<br>        interval   = string # (Required) The time interval in the form hh:mm:ss.<br>        time_taken = string # (Required) The threshold of time passed to qualify as a Slow Request in hh:mm:ss.<br>        path       = string # (Optional) The path for which this slow request rule applies.<br>      })<br>      status_code = object({<br>        count             = number # (Required) The number of occurrences of the defined status_code in the specified interval on which to trigger this rule.<br>        interval          = string # (Required) The time interval in the form hh:mm:ss.<br>        status_code_range = number # (Required) The status code for this rule, accepts single status codes and status code ranges. e.g. 500 or 400-499. Possible values are integers between 101 and 599<br>        path              = string # (Optional) The path to which this rule status code applies.<br>        sub_status        = string # (Optional) The Request Sub Status of the Status Code.<br>        win32_status      = string # (Optional) The Win32 Status Code of the Request.<br>      })<br>    })<br>  })</pre> | `null` | no |
| <a name="input_backup"></a> [backup](#input\_backup) | Backup for the App Service | <pre>object({<br>    name                = string # (Required) Specifies the name for this Backup<br>    enabled             = bool   # (Required) Is this Backup enabled?<br>    storage_account_url = string<br>    schedule = object({<br>      frequency_interval       = string # (Required) Sets how often the backup should be executed.<br>      frequency_unit           = string # (Optional) Sets the unit of time for how often the backup should be executed. Possible values are Day or Hour.<br>      keep_at_least_one_backup = bool   # (Optional) Should at least one backup always be kept in the Storage Account by the Retention Policy, regardless of how old it is?<br>      retention_period_days    = string # (Optional) Specifies the number of days after which Backups should be deleted.<br>      start_time               = string # (Optional) Sets when the schedule should start working.<br>    })<br>  })</pre> | <pre>{<br>  "enabled": false,<br>  "name": "backup",<br>  "schedule": {<br>    "frequency_interval": 1,<br>    "frequency_unit": "Day",<br>    "keep_at_least_one_backup": false,<br>    "retention_period_days": 1,<br>    "start_time": null<br>  },<br>  "storage_account_url": null<br>}</pre> | no |
| <a name="input_client_affinity_enabled"></a> [client\_affinity\_enabled](#input\_client\_affinity\_enabled) | (Optional) Should Client Affinity be enabled? | `bool` | `false` | no |
| <a name="input_client_certificate_mode"></a> [client\_certificate\_mode](#input\_client\_certificate\_mode) | (Optional) Incoming client certificate mode. Possible values include Require, Allow (Default), Optional or Ignore. | `string` | `"Allow"` | no |
| <a name="input_connection_strings"></a> [connection\_strings](#input\_connection\_strings) | A list of connectionstrings | <pre>list(object({<br>    name = string<br>    type = string # (Required) Type of database. Possible values include: APIHub, Custom, DocDb, EventHub, MySQL, NotificationHub, PostgreSQL, RedisCache, ServiceBus, SQLAzure, and SQLServer.<br>    conn = string # (Required) The connection string value.<br>  }))</pre> | `[]` | no |
| <a name="input_cors"></a> [cors](#input\_cors) | Cross-Origin Resource Sharing (CORS) allows JavaScript code running in a browser on an external host to interact with your backend | <pre>object({<br>    enabled             = bool<br>    allowed_origins     = list(string) # (Required) Specifies a list of origins that should be allowed to make cross-origin calls.<br>    support_credentials = bool         # (Optional) Whether CORS requests with credentials are allowed. Defaults to false<br>  })</pre> | <pre>{<br>  "allowed_origins": [<br>    "*"<br>  ],<br>  "enabled": false,<br>  "support_credentials": true<br>}</pre> | no |
| <a name="input_current_stack"></a> [current\_stack](#input\_current\_stack) | (Optional) The Application Stack for the Windows Web App. Possible values include dotnet, dotnetcore, node, python, php, and java. | `string` | n/a | yes |
| <a name="input_default_documents"></a> [default\_documents](#input\_default\_documents) | Default documents | `list(string)` | <pre>[<br>  "Default.htm",<br>  "Default.html",<br>  "Default.asp",<br>  "index.htm",<br>  "index.html",<br>  "iisstart.htm",<br>  "default.aspx",<br>  "index.php",<br>  "hostingstart.html",<br>  "index.js",<br>  "index.py"<br>]</pre> | no |
| <a name="input_dotnet_version"></a> [dotnet\_version](#input\_dotnet\_version) | Optional) The version of .Net to use when current\_stack is set to dotnet. Possible values include v2.0, v3.0, core3.1, v4.0 (Default), v5.0, and v6.0. If Variable 'current\_stack' is dotnetcore the v4.0 or v6.0 can be used. 5 and 6 is fore integrated | `string` | `"v4.0"` | no |
| <a name="input_enabled"></a> [enabled](#input\_enabled) | Is the App Service Enabled? | `bool` | `true` | no |
| <a name="input_ftps_state"></a> [ftps\_state](#input\_ftps\_state) | (Optional) State of FTP / FTPS service for this App Service. Possible values include: AllAllowed, FtpsOnly and Disabled. AppService log requires this to be activated. | `string` | `"FtpsOnly"` | no |
| <a name="input_health_check_path"></a> [health\_check\_path](#input\_health\_check\_path) | (Optional) Path which will be checked for this function app health. | `string` | `null` | no |
| <a name="input_http2_enabled"></a> [http2\_enabled](#input\_http2\_enabled) | (Optional) Specifies if the http2 protocol should be enabled. Defaults to true. | `bool` | `true` | no |
| <a name="input_http_logs"></a> [http\_logs](#input\_http\_logs) | HTTP logs for the App Service | <pre>object({<br>    enabled = bool<br>    file_system = object({<br>      retention_in_days = number # (Required) The number of days to retain logs for.<br>      retention_in_mb   = number # (Required) The maximum size in megabytes that http log files can use before being removed. <br>    })<br>    azure_blob_storage = object({<br>      sas_url           = string<br>      retention_in_days = number<br>    })<br>  })</pre> | <pre>{<br>  "azure_blob_storage": {<br>    "retention_in_days": 10,<br>    "sas_url": null<br>  },<br>  "enabled": false,<br>  "file_system": {<br>    "retention_in_days": 1,<br>    "retention_in_mb": 10<br>  }<br>}</pre> | no |
| <a name="input_https_only"></a> [https\_only](#input\_https\_only) | Can the App Service only be accessed via HTTPS? | `bool` | `true` | no |
| <a name="input_ip_restrictions"></a> [ip\_restrictions](#input\_ip\_restrictions) | The IP Address used for this IP Restriction. One of either ip\_address, service\_tag or virtual\_network\_subnet\_id must be specified. IP\_address should be CIDR or IP-address/32 | <pre>list(object({<br>    name                      = string<br>    action                    = string # (Optional) The action to take. Possible values are Allow or Deny.<br>    priority                  = number # (Optional) The priority value of this ip_restriction.<br>    ip_address                = string # (Optional) The CIDR notation of the IP or IP Range to match. For example: 10.0.0.0/24 or 192.168.10.1/32<br>    virtual_network_subnet_id = string # (Optional) The Virtual Network Subnet ID used for this IP Restriction.<br>    service_tag               = string # (Optional) The Service Tag used for this IP Restriction<br>    headers = list(object({<br>      x_azure_fdid      = set(string)<br>      x_fd_health_probe = set(string)<br>      x_forwarded_for   = set(string)<br>      x_forwarded_host  = set(string)<br>    }))<br>  }))</pre> | `[]` | no |
| <a name="input_java_container"></a> [java\_container](#input\_java\_container) | (Optional) The Java container type to use when current\_stack is set to java. Possible values include JAVA, JETTY, and TOMCAT. Required with java\_version and java\_container\_version. | `string` | `"TOMCAT"` | no |
| <a name="input_java_container_version"></a> [java\_container\_version](#input\_java\_container\_version) | (Optional) The Version of the java\_container to use. Required with java\_version and java\_container. | `string` | `null` | no |
| <a name="input_java_version"></a> [java\_version](#input\_java\_version) | Optional) The version of Java to use when current\_stack is set to java. Possible values include 1.7, 1.8 and 11. Required with java\_container and java\_container\_version. | `string` | `"11"` | no |
| <a name="input_load_balancing_mode"></a> [load\_balancing\_mode](#input\_load\_balancing\_mode) | (Optional) The Site load balancing. Possible values include: WeightedRoundRobin, LeastRequests, LeastResponseTime, WeightedTotalTraffic, RequestHash, PerSiteRoundRobin. Defaults to LeastRequests if omitted. | `string` | `"LeastRequests"` | no |
| <a name="input_logs"></a> [logs](#input\_logs) | (Optional) Overall log settings | <pre>object({<br>    detailed_error_messages = bool # (Optional) Should detailed error messages be enabled.<br>    failed_request_tracing  = bool # (Optional) Should tracing be enabled for failed requests.<br>  })</pre> | <pre>{<br>  "detailed_error_messages": false,<br>  "failed_request_tracing": false<br>}</pre> | no |
| <a name="input_managed_identity_ids"></a> [managed\_identity\_ids](#input\_managed\_identity\_ids) | (Optional) Specifies a list of User Assigned Managed Identity IDs to be assigned to this Windows Virtual Machine Scale Set. | `list(string)` | `[]` | no |
| <a name="input_managed_identity_type"></a> [managed\_identity\_type](#input\_managed\_identity\_type) | (Optional) The type of Managed Identity which should be assigned to the Linux Virtual Machine Scale Set. Possible values are `SystemAssigned`, `UserAssigned` and `SystemAssigned, UserAssigned` | `string` | `null` | no |
| <a name="input_managed_pipeline_mode"></a> [managed\_pipeline\_mode](#input\_managed\_pipeline\_mode) | (Optional) Managed pipeline mode. Possible values include: Integrated, Classic. | `string` | `"Integrated"` | no |
| <a name="input_minimum_tls_version"></a> [minimum\_tls\_version](#input\_minimum\_tls\_version) | (Optional) Configures the minimum version of TLS required for SSL requests. Possible values include: 1.0, 1.1, and 1.2. Defaults to 1.2. | `string` | `"1.2"` | no |
| <a name="input_name"></a> [name](#input\_name) | n/a | `any` | n/a | yes |
| <a name="input_node_version"></a> [node\_version](#input\_node\_version) | (Optional) The version of node to use when current\_stack is set to node. Possible values include 12-LTS, 14-LTS, and 16-LTS. | `string` | `null` | no |
| <a name="input_php_version"></a> [php\_version](#input\_php\_version) | (Optional) The version of PHP to use when current\_stack is set to php. Possible values include v7.4. | `string` | `"v7.4"` | no |
| <a name="input_python_version"></a> [python\_version](#input\_python\_version) | (Optional) The version of Python to use when current\_stack is set to python. Possible values include 2.7 and 3.4.0. | `string` | `null` | no |
| <a name="input_rg_name"></a> [rg\_name](#input\_rg\_name) | n/a | `any` | n/a | yes |
| <a name="input_scm_ip_restrictions"></a> [scm\_ip\_restrictions](#input\_scm\_ip\_restrictions) | The IP Address used for this SCM IP Restriction. SCN is used by Kudo, DevOps and Visual Studio. One of either ip\_address, service\_tag or virtual\_network\_subnet\_id must be specified. IP\_address should be CIDR or IP-address/32 | <pre>list(object({<br>    name                      = optional(string) # (Optional) The name which should be used for this ip_restriction<br>    action                    = optional(string) # (Optional) The action to take. Possible values are Allow or Deny.<br>    priority                  = optional(number) # (Optional) The priority value of this ip_restriction.<br>    ip_address                = optional(string) # (Optional) The CIDR notation of the IP or IP Range to match. For example: 10.0.0.0/24 or 192.168.10.1/32<br>    virtual_network_subnet_id = optional(string) # (Optional) The Virtual Network Subnet ID used for this IP Restriction.<br>    service_tag               = optional(string) # (Optional) The Service Tag used for this IP Restriction<br>    headers = list(object({<br>      x_azure_fdid      = set(string)<br>      x_fd_health_probe = set(string)<br>      x_forwarded_for   = set(string)<br>      x_forwarded_host  = set(string)<br>    }))<br>  }))</pre> | `[]` | no |
| <a name="input_scm_use_main"></a> [scm\_use\_main](#input\_scm\_use\_main) | (Optional) Should the Windows Function App ip\_restriction configuration be used for the SCM also. | `bool` | `false` | no |
| <a name="input_sp_name"></a> [sp\_name](#input\_sp\_name) | n/a | `any` | n/a | yes |
| <a name="input_storage_account"></a> [storage\_account](#input\_storage\_account) | Storage accounts | <pre>list(object({<br>    access_key   = string # (Required) The Access key for the storage account.<br>    account_name = string # (Required) The Name of the Storage Account.<br>    name         = string #  (Required) The name which should be used for this TODO.<br>    share_name   = string #  (Required) The Name of the File Share or Container Name for Blob storage.<br>    type         = string #  (Required) The Azure Storage Type. Possible values include AzureFiles and AzureBlob<br>    mount_path   = string #  (Optional) The path at which to mount the storage share.<br>  }))</pre> | `[]` | no |
| <a name="input_tags"></a> [tags](#input\_tags) | A mapping of tags to assign to the resource. | `map(any)` | `{}` | no |
| <a name="input_time_zone"></a> [time\_zone](#input\_time\_zone) | The function app time zone. https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/default-time-zones?view=windows-11 | `string` | `"W. Europe Standard Time"` | no |
| <a name="input_use_32_bit_worker"></a> [use\_32\_bit\_worker](#input\_use\_32\_bit\_worker) | (Optional) Should the Linux Web App use a 32-bit worker process. Defaults to true. | `bool` | `false` | no |
| <a name="input_vnet_route_all_enabled"></a> [vnet\_route\_all\_enabled](#input\_vnet\_route\_all\_enabled) | (Optional) Should all outbound traffic to have Virtual Network Security Groups and User Defined Routes applied? Defaults to true. | `bool` | `true` | no |
| <a name="input_vnet_subnet_id"></a> [vnet\_subnet\_id](#input\_vnet\_subnet\_id) | (Optional) The subnet id which will be used by this Web App for regional virtual network integration https://docs.microsoft.com/en-us/azure/app-service/overview-vnet-integration#regional-virtual-network-integration. | `string` | `null` | no |
| <a name="input_websockets_enabled"></a> [websockets\_enabled](#input\_websockets\_enabled) | (Optional) Should Web Sockets be enabled. Defaults to false. | `bool` | `false` | no |
| <a name="input_worker_count"></a> [worker\_count](#input\_worker\_count) | (Optional) The number of Workers (instances) to be allocated. | `number` | `2` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_custom_domain_verification_id"></a> [custom\_domain\_verification\_id](#output\_custom\_domain\_verification\_id) | An identifier used by App Service to perform domain ownership verification via DNS TXT record. |
| <a name="output_default_hostname"></a> [default\_hostname](#output\_default\_hostname) | The default hostname associated with the Function App - such as mysite.azurewebsites.net |
| <a name="output_id"></a> [id](#output\_id) | The ID of the Windows WebApp |
| <a name="output_kind"></a> [kind](#output\_kind) | The Kind value for this Windows Web App. |
| <a name="output_outbound_ip_addresses"></a> [outbound\_ip\_addresses](#output\_outbound\_ip\_addresses) | A list of outbound IP addresses |
| <a name="output_possible_outbound_ip_addresses"></a> [possible\_outbound\_ip\_addresses](#output\_possible\_outbound\_ip\_addresses) | A list of outbound IP addresses not all of which are necessarily in use. Superset of outbound\_ip\_addresses. |
| <a name="output_principal_id"></a> [principal\_id](#output\_principal\_id) | The Principal ID for the Service Principal associated with the Managed Service Identity of this App Service. |
